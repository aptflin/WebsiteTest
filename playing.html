<!DOCTYPE html>
<html lang="zh-TW">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=844, height=390, initial-scale=1.0">
  <title>Round Start</title>
  <link rel="stylesheet" href="src/playing.css">
</head>

<body>
  <div class="container">

    <!-- 左上角光效 -->
    <img src="src/leftlight.png" class="left-light" alt="左光">
    <!-- 左上角色圖 -->
    <img src="src/character.png" class="character" alt="角色地圖">

    <!-- 中央 Round 標題 -->
    <div class="round-info">
      <h2 class="round-title">ROUND</h2>
      <h1 class="round-number">1</h1>
    </div>

    <!-- 中央箭頭提示 -->
    <img src="src/bigarrow.png" class="arrow" alt="箭頭提示">

    <div>
      <!-- 右下角光效 -->
      <img src="src/rightlight.png" class="right-light" alt="右光">
      <!-- 右下角 GOAL -->
      <img src="src/goal.png" class="goal" alt="終點路徑">
      <h2 class="goal-text"></h2>
    </div>
  </div>
  <button onclick='window.location.href = "index.html"' ;> 上一頁 </button>
  <!--<h2>control TD</h2>
  <input type="range" class="controlTD">
  <h2>controled by TD</h2>
  <input type="range" class="controledByTD">-->
  <script src="src/playing.js"></script>


  <!--先放在這邊改天再搬家測試-->
  <div id="circleC" style="width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: gray;
      transition: background-color 0.3s;"></div>
  <h3>青色</h3>
  <div id="circleM" style="width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: gray;
      transition: background-color 0.3s;"></div>
  <h3>洋紅</h3>
  <div id="circleY" style="width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: gray;
      transition: background-color 0.3s;"></div>
  <h3>黃色</h3>
  <div id="circleW" style="width: 50px;
      height: 50px;
      border-radius: 50%;
      background-color: gray;
      transition: background-color 0.3s;"></div>
  <h3>白色</h3>
  <!--<input type="checkbox" id="toggleSwitch">-->

  <script>
    let ws = new WebSocket('wss://websitetest-xx30.onrender.com');
    const circleC = document.getElementById("circleC");
    const circleM = document.getElementById("circleM");
    const circleY = document.getElementById("circleY");
    const circleW = document.getElementById("circleW");
    //const toggleC = document.getElementById("toggleSwitch");

    ws.addEventListener('message', (message) => {
      if (message.data == 'ping') {
        ws.send('pong');
        return
      }

      let data = JSON.parse(message.data);
      if ('colorC' in data) {
        let valC = data['colorC'];
        if(valC == 1){
          //toggleC.checked = true;
          circleC.style.backgroundColor = "cyan";
        }else{
          //toggleC.checked = false;
          circleC.style.backgroundColor = "gray";
        }
      }
      if ('colorM' in data) {
        let valM = data['colorM'];
        if(valM == 1){
          //toggleC.checked = true;
          circleM.style.backgroundColor = "magenta";
        }else{
          //toggleC.checked = false;
          circleM.style.backgroundColor = "gray";
        }
      }
      if ('colorY' in data) {
        let valY = data['colorY'];
        if(valY == 1){
          //toggleC.checked = true;
          circleY.style.backgroundColor = "yellow";
        }else{
          //toggleC.checked = false;
          circleY.style.backgroundColor = "gray";
        }
      }
      if ('colorW' in data) {
        let valW = data['colorW'];
        if(valW == 1){
          //toggleC.checked = true;
          circleW.style.backgroundColor = "white";
        }else{
          //toggleC.checked = false;
          circleW.style.backgroundColor = "gray";
        }
      }
    });
  </script>
</body>

</html>