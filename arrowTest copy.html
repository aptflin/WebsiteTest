<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  <title>DeviceOrientation Demo</title>
  <style>
    /* 背景設定 */
    body,
    html {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to top right, #dff6e6, #ccf3f9);
      font-family: "M PLUS 1p", sans-serif;
      display: flex;
      justify-content: center;
      align-items: center;
      overflow: hidden;

      background: radial-gradient(circle at 40% 40%, #fefadc, #e3ffef, #c9fff7);
      background-size: cover;
      background-repeat: no-repeat;
      background-position: center center;
    }

    /* 整體容器 */
    .container {
      width: 844px;
      height: 390px;
      position: relative;
      overflow: visible;
    }

    /* 左上光效 */
    .left-light {
      position: absolute;
      top: -80px;
      left: -40px;
      width: 400px;
      /* 可以微調 */
      opacity: 0.9;
      z-index: 0;
      /* 比 character 更低 */
    }

    /* 左上角角色地圖 */
    .character {
      position: absolute;
      top: 40px;
      left: 80px;
      width: 180px;
      /* 可以微調大小 */
    }

    /* 中間 round 文字 */
    .round-info {
      position: absolute;
      top: 40px;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
    }

    .round-title {
      font-size: 24px;
      color: #2d9999;
      font-weight: 900;
      margin: 0;
    }

    .round-number {
      font-size: 48px;
      color: #2d9999;
      font-weight: 900;
      margin: 0;
    }

    .arrow {
      position: absolute;
      top: 180px;
      left: 50%;
      transform: translateX(-50%);
      width: 120px;
      height: auto;
      transform-style: preserve-3d;
      /* ⭐保持3D空間感 */
      transition: transform 0.1s linear;
      /* ⭐讓旋轉滑順 */
      z-index: 3;
    }

    /* 右下光效 */
    .right-light {
      position: absolute;
      bottom: -90px;
      right: -130px;
      width: 400px;
      /* 可以微調 */
      opacity: 0.9;
      z-index: 0;
      /* 比 goal 更低 */
    }

    /* 右下角 goal 關卡路徑 */
    .goal {
      position: absolute;
      bottom: -110px;
      right: -70px;
      width: 400px;
    }

    /* 左下 GOAL! 文字 */
    .goal-text {
      position: absolute;
      bottom: 5px;
      right: 30px;
      color: white;
      font-weight: 900;
      font-size: 28px;
      text-shadow: 2px 2px 5px rgba(0, 0, 0, 0.3);
      /* 讓字有陰影更清楚 */
      z-index: 5;
      /* 確保文字在最上層 */
    }


    /*下面都是新加的!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!*/
    /* 光球容器 */
    .color-lights {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      /* 不影響點擊行為 */
      z-index: 3;
    }

    /* 單顆光球共用樣式 */
    .light-ball {
      position: absolute;
      width: 42px;
      height: 42px;
      border-radius: 50%;
      opacity: 0;
      box-shadow: 0 0 20px transparent;
      transition: all 0.5s ease;
    }

    /* 顏色亮起樣式 */
    .white.active {
      background-color: white;
      box-shadow: 0 0 20px white;
      opacity: 1;
    }

    .yellow.active {
      background-color: yellow;
      box-shadow: 0 0 20px yellow;
      opacity: 1;
    }

    .magenta.active {
      background-color: magenta;
      box-shadow: 0 0 20px magenta;
      opacity: 1;
    }

    .cyan.active {
      background-color: cyan;
      box-shadow: 0 0 20px cyan;
      opacity: 1;
    }

    @viewport {
      orientation: portrait;
    }

    html,
    body {
      width: 100vw;
      height: 100vh;
      background-color: beige;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      transition: all 0.5s ease-out;
      color: black;
    }

    .arrow {
      max-width: 100px;
      /* ⭐讓圖片不會超出視窗 */
      max-height: 100px;
      /* ⭐讓圖片不會超出視窗 */
      transform-style: preserve-3d;
      /* ⭐保持3D空間感 */
      transition: transform 0.1s linear;
      /* ⭐讓旋轉滑順 */
      z-index: 3;
    }
  </style>
</head>

<body>
  <div id="title">這個可以用按鈕控制正轉反轉</div>
  <div class="container">
    <!-- 左上角光效 -->
    <img src="src/leftlight.png" class="left-light" alt="左光">
    <!-- 左上角色圖 -->
    <img src="src/BlueArea.png" class="character" alt="角色地圖">
    <!-- 中央 Round 標題 -->
    <div class="round-info">
      <h2 class="round-title">ROUND</h2>
      <h1 class="round-number">1</h1>
    </div>
    <!-- 中央箭頭提示 -->
    <img src="src/bigarrow.png" class="arrow" alt="箭頭提示">
    <div>
      <!-- 右下角光效 -->
      <img src="src/rightlight.png" class="right-light" alt="右光">
      <!-- 右下角 GOAL -->
      <img src="src/goal.png" class="goal" alt="終點路徑">
      <h2 class="goal-text">GOAL!</h2>
      <!-- 光球回饋 --> <!-- 新加了這個div class!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!! -->
      <div class="color-lights">
        <div class="light-ball white" style="top: 304.5px; left: 585px;"></div>
        <div class="light-ball yellow" style="top: 256.5px; left: 638px;"></div>
        <div class="light-ball magenta" style="top: 220.5px; left: 700px;"></div>
        <div class="light-ball cyan" style="top: 196.5px; left: 765px;"></div>
      </div>
    </div>
  </div>
  <div id="number">0</div>

  <button onclick="turnOn()">正轉</button>
  <button onclick="turnOff()">反轉</button>
  <button onclick="stop()">停止</button>


  <script>
    function turnOn() {
      fetch('/led/on');
    }
    function turnOff() {
      fetch('/led/off');
    }
    function stop() {
      fetch('/led/stop');
    }
  </script>

  <script src="src/playing to arduino.js"></script>
</body>

</html>